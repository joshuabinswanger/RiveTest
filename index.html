<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Rive Fullscreen Canvas</title>
    <!-- Rive Web (Canvas) runtime -->
    <script src="https://unpkg.com/@rive-app/canvas"></script>
    <style>
      /* Make the canvas fill the entire viewport */
      html,
      body {
        height: 100%;
        margin: 0;
      }
      body {
        display: flex;
        background: #0f0f12; /* optional: dark backdrop while loading */
      }
      canvas#rive {
        flex: 1 1 auto;
        width: 100%;
        height: 100%;
        display: block; /* removes inline-block gaps */
      }
    </style>
  </head>
  <body>
    <canvas id="rive"></canvas>

    <script>
      // Initialize once the Rive runtime script is loaded
      window.addEventListener("load", function () {
        const canvas = document.getElementById("rive");

        // Create the Rive renderer
        const r = new rive.Rive({
          src: "assets/RSWS_RiveTest1.riv",
          canvas: canvas,
          artboard: "Artboard",
          stateMachines: "State Machine 1",
          autoplay: true,
          autoBind: true,

          onLoad: () => {
            r.resizeDrawingSurfaceToCanvas();

            const vmi = r.viewModelInstance;

            const SatteliteLinkOut = vmi.trigger("SatteliteLinkOut");
            const SatteliteOpen = vmi.boolean("SatteliteOpen");
            // Observe
            SatteliteLinkOut.on((event) => {
              window.open(
                "https://www.geo.uzh.ch/en/units/rsws/research/SAR_Lab.html",
                "_blank"
              );
              SatteliteOpen.value = true;
            });
          },
        });

        // Handle high-DPI (retina) and resizing so the canvas stays sharp & 100%
        function resizeCanvasToDisplaySize() {
          const dpr = window.devicePixelRatio || 1;
          const rect = canvas.getBoundingClientRect();
          const needResize =
            canvas.width !== Math.round(rect.width * dpr) ||
            canvas.height !== Math.round(rect.height * dpr);
          if (needResize) {
            canvas.width = Math.round(rect.width * dpr);
            canvas.height = Math.round(rect.height * dpr);
            // Notify Rive its drawing surface changed
            r.resizeDrawingSurfaceToCanvas();
          }
        }

        // Initial size + on resize
        resizeCanvasToDisplaySize();
        window.addEventListener("resize", resizeCanvasToDisplaySize);
      });
    </script>
  </body>
</html>
